{% extends "master.html.twig" %}

{% block title %}{{"My portfolio"}}{% endblock %}

{% block head %}    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            
            $('#submitskills').click(function () {
                var skill = [];
                $('.skills_class:checked').each(function () {
                    if ($(this).is(":checked")) {
                        skill.push($(this).val());
                    }
                });
                
                skill = skill.toString();
                $.ajax({
                    url: "index.php/freelancer",
                    method: "POST",
                    data: {skill: skill},
                    success: function (data) {
                        $('#result').html(data);
                    }
                });//end of ajax*/
            });//end of submitskills button function
            
            $('#submitoverview').click(function () {
                
            }
            
        });//end of document ready











        /*   
         
         }
         /*var skills = $('input:checkbox:checked.skills_class').map(function () {
         return this.value;
         }).get().join(",");
         
         });
         
         /*<?php
         $target_dir = "uploads/";
         $target_file = $target_dir . basename($_FILES["fileToUpload"]["name"]);
         $uploadOk = 1;
         $imageFileType = pathinfo($target_file,PATHINFO_EXTENSION);
         // Check if image file is an actual image or fake image
         if(isset($_POST["submit"])) {
         $check = getimagesize($_FILES["fileToUpload"]["tmp_name"]);
         if($check !== false) {
         echo "File is an image - " . $check["mime"] . ".";
         $uploadOk = 1;
         } else {
         echo "File is not an image.";
         $uploadOk = 0;
         }
         }
         // Check if file already exists
         if (file_exists($target_file)) {
         echo "Sorry, file already exists.";
         $uploadOk = 0;
         }
         // Check file size
         if ($_FILES["fileToUpload"]["size"] > 500000) {
         echo "Sorry, your file is too large.";
         $uploadOk = 0;
         }
         // Allow certain file formats
         if($imageFileType != "jpg" && $imageFileType != "png" && $imageFileType != "jpeg"
         && $imageFileType != "gif" ) {
         echo "Sorry, only JPG, JPEG, PNG & GIF files are allowed.";
         $uploadOk = 0;
         }
         // Check if $uploadOk is set to 0 by an error
         if ($uploadOk == 0) {
         echo "<br>Sorry, your file was not uploaded.";
         // if everything is ok, try to upload file
         } else {
         if (move_uploaded_file($_FILES["fileToUpload"]["tmp_name"], $target_file)) {
         echo "The file ". basename( $_FILES["fileToUpload"]["name"]). " has been uploaded.";
         } else {
         echo "Sorry, there was an error uploading your file.";
         }
         }        
         
         ?> */
    </script>
{% endblock %}  

{% block content %}
    <div class="blueContainer">
        <br>
        <h1>Freelancer portfolio</h1>
        <form class="form-horizontal" id="portfolioForm" method="POST" action="">

            <!-- Picture input -->
            <div class="form-group">
                <fieldset class="fieldset-border">
                    <legend class="fieldset-border">A picture of me:</legend>
                    <div class="row" id="pictureinputrow">
                        <input type="file" name="mypicture" id="mypicture" value="{{v.imagePath}}"> 
                    </div> 
                </fieldset>
                    <!-- Save my skills button --> 
            <div class="row" id="submitmypicturerow">
                <div class="form-group"> 
                    <div class="col-sm-offset-2 col-sm-10 text-center">
                        <button type="submit" class="btn btn-primary" name="submitmypicture" id="submitmypicture">Save my picture</button>
                        <br><br>
                    </div>
                </div>
            </div>
            </div>

            <!-- Skills input -->
            <div class="form-group">
                <fieldset class="fieldset-border">
                    <legend class="fieldset-border">Skills</legend>
                    <div class="checkbox col-sm-3 lefttext" id="skills" style="padding-left:25px;" >
                        <label><input type="checkbox" name="skills[]" class="skills_class" value="C">C</label><br>
                        <label><input type="checkbox" name="skills[]" class="skills_class" value="C++">C++</label><br>
                        <label><input type="checkbox" name="skills[]" class="skills_class" value="C#">C#</label><br>
                        <label><input type="checkbox" name="skills[]" class="skills_class" value="Objective C">Objective C</label><br>
                        <label><input type="checkbox" name="skills[]" class="skills_class" value="CSS">CSS</label><br>
                        <label><input type="checkbox" name="skills[]" class="skills_class" value="HTML">HTML</label><br>
                        <label><input type="checkbox" name="skills[]" class="skills_class" value="Java">Java</label><br>
                        <label><input type="checkbox" name="skills[]" class="skills_class" value="JavaScript">JavaScript</label><br>
                        <label><input type="checkbox" name="skills[]" class="skills_class" value="PHP">PHP</label><br>
                        <label><input type="checkbox" name="skills[]" class="skills_class" value="Python">Python</label><br>
                        <label><input type="checkbox" name="skills[]" class="skills_class" value="Ruby">Ruby</label><br>
                        <label><input type="checkbox" name="skills[]" class="skills_class" value="Other">Other</label><br>
                    </div>
                </fieldset>
                <h3 id="result"></h3>
                <!-- Save my skills button --> 
            <div class="row" id="submitskillsrow">
                <div class="form-group"> 
                    <div class="col-sm-offset-2 col-sm-10 text-center">
                        <button type="submit" class="btn btn-primary" name="submitskills" id="submitskills">Save my skills</button>
                        <br><br>
                    </div>
                </div>
            </div>
            </div>

            <!-- Overview input -->
            <div class="form-group">
                <fieldset class="fieldset-border">
                    <legend class="fieldset-border">Overview</legend>
                    <div class="form-group">
                        <label for="comment">Comment:</label>
                        <textarea class="form-control" rows="5" id="overviewtextarea"></textarea>
                    </div>
                </fieldset>
                <h3 id="result"></h3>
                <!-- Overview button --> 
            <div class="row" id="submitoverviewrow">
                <div class="form-group"> 
                    <div class="col-sm-offset-2 col-sm-10 text-center">
                        <button type="submit" class="btn btn-primary" name="submitoverview" id="submitoverview">Save my overview</button>
                        <br><br>
                    </div>
                </div>
            </div>
            </div>
<!--
            <!-- Save my skills button 
            <div class="row" id="submitbutton">
                <div class="form-group"> 
                    <div class="col-sm-offset-2 col-sm-10 text-center">
                        <button type="submit" class="btn btn-primary" name="submitskills" id="submitskills">Save my skills</button>
                        <br><br>
                    </div>
                </div>
            </div>--> 
        </form>
    </div>
{% endblock %}
